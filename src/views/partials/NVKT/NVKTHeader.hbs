<header class="sticky top-0 z-10">
    <nav id="navbar" class="flex items-center h-128 px-8 py-4 backdrop-blur-md  bg-slate-400 opacity-85">

        <div class="logo-container h-18 w-24 md:w-36 mr-0 block">
            <a href="/NVKT" class="w-full h-auto">
                <img src="/img/logo.png" class="w-24 h-12" alt="logoSushiABD">
            </a>
        </div>

        <ul class="nav-list flex px-4 text-white text-base md:space-x-12">
            <li><a href="/NVKT/ThanhToan"
                    class="transition-transform duration-200 transform hover:scale-110 hover:font-bold hover:text-green-700">
                    Thanh toán đăng ký</a></li>
        </ul>

        <ul class="nav-list flex px-4 text-white text-base md:space-x-12">
            <li><a href="/NVKT/ThanhToan/ChuaThanhToan"
                    class="transition-transform duration-200 transform hover:scale-110 hover:font-bold hover:text-green-700">
                    Danh sách chưa thanh toán</a></li>
        </ul>

        <ul class="flex space-x-4 ml-auto items-center relative">
            <li id="userNameContainer" class="text-white font-semibold hidden md:block"></li>

            <!-- Icon và dropdown -->
            <li class="relative">
                <button id="userMenuBtn" class="flex items-center justify-center text-white focus:outline-none">
                <i class="fa-solid fa-user text-3xl"></i>
                </button>

                <!-- Dropdown -->
                <div id="userDropdown" class="absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg z-20 hidden">
                <a href="/" id="logoutBtn"
                    class="block px-4 py-2 text-gray-800 hover:bg-gray-200 hover:text-red-600">
                    Đăng xuất
                </a>
                </div>
            </li>
        </ul>


    </nav>
</header>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const userName = sessionStorage.getItem('userName');
    const role = sessionStorage.getItem('role');
    const nameContainer = document.getElementById('userNameContainer');

    if (!userName || role !== 'ke toan') {
      window.location.href = "/";
      return;
    }

    if (nameContainer) {
      nameContainer.textContent = `${userName}`;
    }

    // Toggle dropdown khi bấm icon
    const menuBtn = document.getElementById('userMenuBtn');
    const dropdown = document.getElementById('userDropdown');

    menuBtn.addEventListener('click', function () {
      dropdown.classList.toggle('hidden');
    });

    // Logout: xóa sessionStorage & chuyển trang
    document.getElementById('logoutBtn').addEventListener('click', function () {
      sessionStorage.removeItem('userID');
      sessionStorage.removeItem('userName');
      sessionStorage.removeItem('role');
    });

    // Click ra ngoài thì ẩn dropdown
    window.addEventListener('click', function (e) {
      if (!menuBtn.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.classList.add('hidden');
      }
    });
  });
</script>