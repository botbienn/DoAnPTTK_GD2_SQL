<header class="sticky top-0 z-10">
  <nav id="navbar"
    class="flex items-center justify-between h-20 px-6 md:px-12 py-2 backdrop-blur-md bg-slate-800/90 shadow-md rounded-b-lg">

    <!-- Logo -->
    <div class="logo-container h-16 w-24 md:w-36 flex-shrink-0">
      <a href="/NVKT" class="block w-full h-full">
        <img src="/img/logo.png" class="w-full h-full object-contain" alt="logoSushiABD" />
      </a>
    </div>

    <!-- Nav Links -->
    <div class="flex items-center space-x-4 md:space-x-6 ml-6 text-sm">
      <a href="/NVKT"
        class="transition duration-200 hover:bg-blue hover:text-white px-3 py-2 rounded-md text-white font-medium">
        Trang chủ
      </a>

      <span class="text-gray-400">|</span>

      <a href="/NVKT/ThanhToan"
        class="transition duration-200 hover:bg-blue hover:text-white px-3 py-2 rounded-md text-white font-medium">
        Thanh toán đăng ký
      </a>

      <span class="text-gray-400">|</span>

      <a href="/NVKT/ThanhToan/ChuaThanhToan"
        class="transition duration-200 hover:bg-blue hover:text-white px-3 py-2 rounded-md text-white font-medium">
        Danh sách chưa thanh toán
      </a>

      <span class="text-gray-400">|</span>

      <a href="/NVKT/quanligiahan"
        class="transition duration-200 hover:bg-blue hover:text-white px-3 py-2 rounded-md text-white font-medium">
        Quản lí gia hạn
      </a>
    </div>

    <!-- User Info -->
    <div class="flex items-center space-x-4 relative ml-auto">
      <!-- Username -->
      <span id="userNameContainer" class="text-white font-semibold hidden md:block"></span>

      <!-- Dropdown Button -->
      <button id="userMenuBtn"
        class="flex items-center justify-center w-10 h-10 rounded-full bg-slate-700 hover:bg-slate-600 focus:outline-none transition">
        <i class="fa-solid fa-user text-xl text-white"></i>
      </button>

      <!-- Dropdown Menu -->
      <div id="userDropdown"
        class="absolute top-14 right-0 w-40 bg-white rounded-md shadow-lg z-20 hidden overflow-hidden">
        <a href="/" id="logoutBtn"
          class="block px-4 py-2 text-gray-800 hover:bg-gray-100 hover:text-red-500 transition">Đăng xuất</a>
      </div>
    </div>
  </nav>
</header>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    const userName = sessionStorage.getItem('userName');
    const role = sessionStorage.getItem('role');
    const nameContainer = document.getElementById('userNameContainer');

    if (!userName || role !== 'ke toan') {
      window.location.href = "/";
      return;
    }

    if (nameContainer) {
      nameContainer.textContent = `${userName}`;
    }

    // Toggle dropdown khi bấm icon
    const menuBtn = document.getElementById('userMenuBtn');
    const dropdown = document.getElementById('userDropdown');

    menuBtn.addEventListener('click', function () {
      dropdown.classList.toggle('hidden');
    });

    // Logout: xóa sessionStorage & chuyển trang
    document.getElementById('logoutBtn').addEventListener('click', function () {
      sessionStorage.removeItem('userID');
      sessionStorage.removeItem('userName');
      sessionStorage.removeItem('role');
    });

    // Click ra ngoài thì ẩn dropdown
    window.addEventListener('click', function (e) {
      if (!menuBtn.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.classList.add('hidden');
      }
    });
  });
</script>